{% extends 'core/base.html' %}
{% block title %}×”×©×“×•×ª ×©×œ×™{% endblock %}

{% block content %}
<div class="p-8">
  <h1 class="text-2xl font-bold mb-6 text-center">×—×‘×™×œ×ª ×”×¦×™×œ×•× ×©×œ×š</h1>
  <p class="text-gray-500 text-sm mb-10 italic text-center">
    ğŸ“‹××¤×©×¨ ×œ×”×•×¡×™×£ ×¤×” ××ª ×¤×¨×˜×™ ×—×‘×™×œ×ª ×”×¦×™×œ×•× ×©×œ×š
    <br> ×œ×“×•×’××: ××¡×¤×¨ ×©×¢×•×ª ×¦×™×œ×•×, ××—×™×¨, ×¡×•×’×™ ××œ×‘×•××™× ×•×›×Ÿ ×”×œ××”...
    <br>×¤×¨×˜×™ ×”×—×‘×™×œ×” ×™×•×¤×™×¢×• ××¦×œ ×›×œ ×œ×§×•×— ×¢× ×¢×¨×š ×‘×¨×™×¨×ª ×”××—×“×œ ×©×”×’×“×¨×ª
    <br> ××¤×©×¨ ×œ×©× ×•×ª ×œ×›×œ ×œ×§×•×— ××ª ×¤×¨×˜×™ ×”×—×‘×™×œ×” ×‘×¢×¨×™×›×ª ×œ×§×•×—
  </p>

  {% if fields %}
    <div class="bg-gray-100 p-6 rounded-xl shadow">
      <table class="w-full text-right border-collapse">
        <thead>
          <tr class="border-b">
            <th class="py-2">×›×•×ª×¨×ª</th>
            <th class="py-2">×¡×•×’</th>
            <th class="py-2">×‘×¨×™×¨×ª ××—×“×œ</th>
            <th class="py-2">××¤×©×¨×•×™×•×ª</th>
            <th class="py-2 text-center">×¤×¢×•×œ×•×ª</th>
          </tr>
        </thead>
        <tbody>
          {% for name, details in fields.items %}
            <tr class="border-b hover:bg-gray-50">
              
              <!-- FIELD NAME -->
              <td class="py-2">{{ details.label }}</td>

              <!-- FIELD TIPE -->
              <td class="py-2">
                {% if details.type == "string" %} ×˜×§×¡×˜
                {% elif details.type == "number" %} ××¡×¤×¨
                {% elif details.type == "boolean" %} ×›×Ÿ/×œ×
                {% elif details.type == "choice" %} ×‘×—×™×¨×” ××¨×•×‘×”
                {% endif %}
              </td>

              <!-- FIELD DEFAULT -->
              <td class="py-2">
                {% if details.type == "boolean" %}
                    {% if details.default == "True" or details.default == True %}
                      ×›×•×œ×œ
                    {% else %}
                      ×œ× ×›×•×œ×œ
                    {% endif %}
                {% else %}
                    {{ details.default|default:"â€”" }}
                {% endif %}
              </td>

              <!-- CHOICES (IF THE TYPE IS CHICE) -->
              <td class="py-2">
                {% if details.type == "choice" %}
                    {{ details.options|join:" , " }}
                {% else %}
                    â€”
                {% endif %}
              </td>


              <td class="py-2 text-center space-x-2">
                <a href="{% url 'edit_deal_template' name %}" class="text-green-600 hover:underline">×¢×¨×•×š</a>
                <a href="{% url 'delete_deal_template_field' name %}" 
                   class="text-red-600 hover:underline"
                   onclick="return confirm('×œ××—×•×§ ××ª ×”×©×“×” ×”×–×”?')">
                   ××—×§
                </a>
              </td>

            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-center text-gray-500 mt-6">××™×Ÿ ×œ×š ×¢×“×™×™×Ÿ ×©×“×•×ª ××•×ª×××™× ××™×©×™×ª.</p>
  {% endif %}

  <div class="mt-6 text-center">
    <a href="{% url 'add_deal_template_field' %}" class="bg-teal-500 text-white py-2 px-4 rounded-xl hover:bg-teal-600">â• ×”×•×¡×£ ×©×“×” ×—×“×©</a>
  </div>
</div>
{% endblock %}
